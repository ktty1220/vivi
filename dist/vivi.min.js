/*! Hammer.JS - v1.0.6 - 2014-01-02
 * http://eightmedia.github.com/hammer.js
 *
 * Copyright (c) 2014 Jorik Tangelder <j.tangelder@gmail.com>;
 * Licensed under the MIT license */
!function(t,e){"use strict";function n(){i.READY||(i.event.determineEventTypes(),i.utils.each(i.gestures,function(t){i.detection.register(t)}),i.event.onTouch(i.DOCUMENT,i.EVENT_MOVE,i.detection.detect),i.event.onTouch(i.DOCUMENT,i.EVENT_END,i.detection.detect),i.READY=!0)}var i=function(t,e){return new i.Instance(t,e||{})};i.defaults={stop_browser_behavior:{userSelect:"none",touchAction:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},i.HAS_POINTEREVENTS=t.navigator.pointerEnabled||t.navigator.msPointerEnabled,i.HAS_TOUCHEVENTS="ontouchstart"in t,i.MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android|silk/i,i.NO_MOUSEEVENTS=i.HAS_TOUCHEVENTS&&t.navigator.userAgent.match(i.MOBILE_REGEX),i.EVENT_TYPES={},i.DIRECTION_DOWN="down",i.DIRECTION_LEFT="left",i.DIRECTION_UP="up",i.DIRECTION_RIGHT="right",i.POINTER_MOUSE="mouse",i.POINTER_TOUCH="touch",i.POINTER_PEN="pen",i.EVENT_START="start",i.EVENT_MOVE="move",i.EVENT_END="end",i.DOCUMENT=t.document,i.plugins=i.plugins||{},i.gestures=i.gestures||{},i.READY=!1,i.utils={extend:function(t,n,i){for(var r in n)t[r]!==e&&i||(t[r]=n[r]);return t},each:function(t,n,i){var r,s;if("forEach"in t)t.forEach(n,i);else if(t.length!==e){for(r=0,s=t.length;s>r;r++)if(n.call(i,t[r],r,t)===!1)return}else for(r in t)if(t.hasOwnProperty(r)&&n.call(i,t[r],r,t)===!1)return},hasParent:function(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1},getCenter:function(t){var e=[],n=[];return i.utils.each(t,function(t){e.push("undefined"!=typeof t.clientX?t.clientX:t.pageX),n.push("undefined"!=typeof t.clientY?t.clientY:t.pageY)}),{pageX:(Math.min.apply(Math,e)+Math.max.apply(Math,e))/2,pageY:(Math.min.apply(Math,n)+Math.max.apply(Math,n))/2}},getVelocity:function(t,e,n){return{x:Math.abs(e/t)||0,y:Math.abs(n/t)||0}},getAngle:function(t,e){var n=e.pageY-t.pageY,i=e.pageX-t.pageX;return 180*Math.atan2(n,i)/Math.PI},getDirection:function(t,e){var n=Math.abs(t.pageX-e.pageX),r=Math.abs(t.pageY-e.pageY);return n>=r?t.pageX-e.pageX>0?i.DIRECTION_LEFT:i.DIRECTION_RIGHT:t.pageY-e.pageY>0?i.DIRECTION_UP:i.DIRECTION_DOWN},getDistance:function(t,e){var n=e.pageX-t.pageX,i=e.pageY-t.pageY;return Math.sqrt(n*n+i*i)},getScale:function(t,e){return t.length>=2&&e.length>=2?this.getDistance(e[0],e[1])/this.getDistance(t[0],t[1]):1},getRotation:function(t,e){return t.length>=2&&e.length>=2?this.getAngle(e[1],e[0])-this.getAngle(t[1],t[0]):0},isVertical:function(t){return t==i.DIRECTION_UP||t==i.DIRECTION_DOWN},stopDefaultBrowserBehavior:function(t,e){e&&t&&t.style&&(i.utils.each(["webkit","khtml","moz","Moz","ms","o",""],function(n){i.utils.each(e,function(e){n&&(e=n+e.substring(0,1).toUpperCase()+e.substring(1)),e in t.style&&(t.style[e]=e)})}),"none"==e.userSelect&&(t.onselectstart=function(){return!1}),"none"==e.userDrag&&(t.ondragstart=function(){return!1}))}},i.Instance=function(t,e){var r=this;return n(),this.element=t,this.enabled=!0,this.options=i.utils.extend(i.utils.extend({},i.defaults),e||{}),this.options.stop_browser_behavior&&i.utils.stopDefaultBrowserBehavior(this.element,this.options.stop_browser_behavior),i.event.onTouch(t,i.EVENT_START,function(t){r.enabled&&i.detection.startDetect(r,t)}),this},i.Instance.prototype={on:function(t,e){var n=t.split(" ");return i.utils.each(n,function(t){this.element.addEventListener(t,e,!1)},this),this},off:function(t,e){var n=t.split(" ");return i.utils.each(n,function(t){this.element.removeEventListener(t,e,!1)},this),this},trigger:function(t,e){e||(e={});var n=i.DOCUMENT.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e;var r=this.element;return i.utils.hasParent(e.target,r)&&(r=e.target),r.dispatchEvent(n),this},enable:function(t){return this.enabled=t,this}};var r=null,s=!1,o=!1;i.event={bindDom:function(t,e,n){var r=e.split(" ");i.utils.each(r,function(e){t.addEventListener(e,n,!1)})},onTouch:function(t,e,n){var a=this;this.bindDom(t,i.EVENT_TYPES[e],function(h){var c=h.type.toLowerCase();if(!c.match(/mouse/)||!o){c.match(/touch/)||c.match(/pointerdown/)||c.match(/mouse/)&&1===h.which?s=!0:c.match(/mouse/)&&!h.which&&(s=!1),c.match(/touch|pointer/)&&(o=!0);var u=0;s&&(i.HAS_POINTEREVENTS&&e!=i.EVENT_END?u=i.PointerEvent.updatePointer(e,h):c.match(/touch/)?u=h.touches.length:o||(u=c.match(/up/)?0:1),u>0&&e==i.EVENT_END?e=i.EVENT_MOVE:u||(e=i.EVENT_END),(u||null===r)&&(r=h),n.call(i.detection,a.collectEventData(t,e,a.getTouchList(r,e),h)),i.HAS_POINTEREVENTS&&e==i.EVENT_END&&(u=i.PointerEvent.updatePointer(e,h))),u||(r=null,s=!1,o=!1,i.PointerEvent.reset())}})},determineEventTypes:function(){var t;t=i.HAS_POINTEREVENTS?i.PointerEvent.getEvents():i.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],i.EVENT_TYPES[i.EVENT_START]=t[0],i.EVENT_TYPES[i.EVENT_MOVE]=t[1],i.EVENT_TYPES[i.EVENT_END]=t[2]},getTouchList:function(t){return i.HAS_POINTEREVENTS?i.PointerEvent.getTouchList():t.touches?t.touches:(t.identifier=1,[t])},collectEventData:function(t,e,n,r){var s=i.POINTER_TOUCH;return(r.type.match(/mouse/)||i.PointerEvent.matchType(i.POINTER_MOUSE,r))&&(s=i.POINTER_MOUSE),{center:i.utils.getCenter(n),timeStamp:(new Date).getTime(),target:r.target,touches:n,eventType:e,pointerType:s,srcEvent:r,preventDefault:function(){this.srcEvent.preventManipulation&&this.srcEvent.preventManipulation(),this.srcEvent.preventDefault&&this.srcEvent.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return i.detection.stopDetect()}}}},i.PointerEvent={pointers:{},getTouchList:function(){var t=this,e=[];return i.utils.each(t.pointers,function(t){e.push(t)}),e},updatePointer:function(t,e){return t==i.EVENT_END?this.pointers={}:(e.identifier=e.pointerId,this.pointers[e.pointerId]=e),Object.keys(this.pointers).length},matchType:function(t,e){if(!e.pointerType)return!1;var n=e.pointerType,r={};return r[i.POINTER_MOUSE]=n===e.MSPOINTER_TYPE_MOUSE||n===i.POINTER_MOUSE,r[i.POINTER_TOUCH]=n===e.MSPOINTER_TYPE_TOUCH||n===i.POINTER_TOUCH,r[i.POINTER_PEN]=n===e.MSPOINTER_TYPE_PEN||n===i.POINTER_PEN,r[t]},getEvents:function(){return["pointerdown MSPointerDown","pointermove MSPointerMove","pointerup pointercancel MSPointerUp MSPointerCancel"]},reset:function(){this.pointers={}}},i.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(t,e){this.current||(this.stopped=!1,this.current={inst:t,startEvent:i.utils.extend({},e),lastEvent:!1,name:""},this.detect(e))},detect:function(t){if(this.current&&!this.stopped){t=this.extendEventData(t);var e=this.current.inst.options;return i.utils.each(this.gestures,function(n){return this.stopped||e[n.name]===!1||n.handler.call(n,t,this.current.inst)!==!1?void 0:(this.stopDetect(),!1)},this),this.current&&(this.current.lastEvent=t),t.eventType==i.EVENT_END&&!t.touches.length-1&&this.stopDetect(),t}},stopDetect:function(){this.previous=i.utils.extend({},this.current),this.current=null,this.stopped=!0},extendEventData:function(t){var e=this.current.startEvent;!e||t.touches.length==e.touches.length&&t.touches!==e.touches||(e.touches=[],i.utils.each(t.touches,function(t){e.touches.push(i.utils.extend({},t))}));var n,r,s=t.timeStamp-e.timeStamp,o=t.center.pageX-e.center.pageX,a=t.center.pageY-e.center.pageY,h=i.utils.getVelocity(s,o,a);return"end"===t.eventType?(n=this.current.lastEvent&&this.current.lastEvent.interimAngle,r=this.current.lastEvent&&this.current.lastEvent.interimDirection):(n=this.current.lastEvent&&i.utils.getAngle(this.current.lastEvent.center,t.center),r=this.current.lastEvent&&i.utils.getDirection(this.current.lastEvent.center,t.center)),i.utils.extend(t,{deltaTime:s,deltaX:o,deltaY:a,velocityX:h.x,velocityY:h.y,distance:i.utils.getDistance(e.center,t.center),angle:i.utils.getAngle(e.center,t.center),interimAngle:n,direction:i.utils.getDirection(e.center,t.center),interimDirection:r,scale:i.utils.getScale(e.touches,t.touches),rotation:i.utils.getRotation(e.touches,t.touches),startEvent:e}),t},register:function(t){var n=t.defaults||{};return n[t.name]===e&&(n[t.name]=!0),i.utils.extend(i.defaults,n,!0),t.index=t.index||1e3,this.gestures.push(t),this.gestures.sort(function(t,e){return t.index<e.index?-1:t.index>e.index?1:0}),this.gestures}},i.gestures.Drag={name:"drag",index:50,defaults:{drag_min_distance:10,correct_for_drag_min_distance:!0,drag_max_touches:1,drag_block_horizontal:!1,drag_block_vertical:!1,drag_lock_to_axis:!1,drag_lock_min_distance:25},triggered:!1,handler:function(t,e){if(i.detection.current.name!=this.name&&this.triggered)return e.trigger(this.name+"end",t),void(this.triggered=!1);if(!(e.options.drag_max_touches>0&&t.touches.length>e.options.drag_max_touches))switch(t.eventType){case i.EVENT_START:this.triggered=!1;break;case i.EVENT_MOVE:if(t.distance<e.options.drag_min_distance&&i.detection.current.name!=this.name)return;if(i.detection.current.name!=this.name&&(i.detection.current.name=this.name,e.options.correct_for_drag_min_distance&&t.distance>0)){var n=Math.abs(e.options.drag_min_distance/t.distance);i.detection.current.startEvent.center.pageX+=t.deltaX*n,i.detection.current.startEvent.center.pageY+=t.deltaY*n,t=i.detection.extendEventData(t)}(i.detection.current.lastEvent.drag_locked_to_axis||e.options.drag_lock_to_axis&&e.options.drag_lock_min_distance<=t.distance)&&(t.drag_locked_to_axis=!0);var r=i.detection.current.lastEvent.direction;t.drag_locked_to_axis&&r!==t.direction&&(t.direction=i.utils.isVertical(r)?t.deltaY<0?i.DIRECTION_UP:i.DIRECTION_DOWN:t.deltaX<0?i.DIRECTION_LEFT:i.DIRECTION_RIGHT),this.triggered||(e.trigger(this.name+"start",t),this.triggered=!0),e.trigger(this.name,t),e.trigger(this.name+t.direction,t),(e.options.drag_block_vertical&&i.utils.isVertical(t.direction)||e.options.drag_block_horizontal&&!i.utils.isVertical(t.direction))&&t.preventDefault();break;case i.EVENT_END:this.triggered&&e.trigger(this.name+"end",t),this.triggered=!1}}},i.gestures.Hold={name:"hold",index:10,defaults:{hold_timeout:500,hold_threshold:1},timer:null,handler:function(t,e){switch(t.eventType){case i.EVENT_START:clearTimeout(this.timer),i.detection.current.name=this.name,this.timer=setTimeout(function(){"hold"==i.detection.current.name&&e.trigger("hold",t)},e.options.hold_timeout);break;case i.EVENT_MOVE:t.distance>e.options.hold_threshold&&clearTimeout(this.timer);break;case i.EVENT_END:clearTimeout(this.timer)}}},i.gestures.Release={name:"release",index:1/0,handler:function(t,e){t.eventType==i.EVENT_END&&e.trigger(this.name,t)}},i.gestures.Swipe={name:"swipe",index:40,defaults:{swipe_min_touches:1,swipe_max_touches:1,swipe_velocity:.7},handler:function(t,e){if(t.eventType==i.EVENT_END){if(e.options.swipe_max_touches>0&&t.touches.length<e.options.swipe_min_touches&&t.touches.length>e.options.swipe_max_touches)return;(t.velocityX>e.options.swipe_velocity||t.velocityY>e.options.swipe_velocity)&&(e.trigger(this.name,t),e.trigger(this.name+t.direction,t))}}},i.gestures.Tap={name:"tap",index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,tap_always:!0,doubletap_distance:20,doubletap_interval:300},handler:function(t,e){if(t.eventType==i.EVENT_END&&"touchcancel"!=t.srcEvent.type){var n=i.detection.previous,r=!1;if(t.deltaTime>e.options.tap_max_touchtime||t.distance>e.options.tap_max_distance)return;n&&"tap"==n.name&&t.timeStamp-n.lastEvent.timeStamp<e.options.doubletap_interval&&t.distance<e.options.doubletap_distance&&(e.trigger("doubletap",t),r=!0),(!r||e.options.tap_always)&&(i.detection.current.name="tap",e.trigger(i.detection.current.name,t))}}},i.gestures.Touch={name:"touch",index:-1/0,defaults:{prevent_default:!1,prevent_mouseevents:!1},handler:function(t,e){return e.options.prevent_mouseevents&&t.pointerType==i.POINTER_MOUSE?void t.stopDetect():(e.options.prevent_default&&t.preventDefault(),void(t.eventType==i.EVENT_START&&e.trigger(this.name,t)))}},i.gestures.Transform={name:"transform",index:45,defaults:{transform_min_scale:.01,transform_min_rotation:1,transform_always_block:!1},triggered:!1,handler:function(t,e){if(i.detection.current.name!=this.name&&this.triggered)return e.trigger(this.name+"end",t),void(this.triggered=!1);if(!(t.touches.length<2))switch(e.options.transform_always_block&&t.preventDefault(),t.eventType){case i.EVENT_START:this.triggered=!1;break;case i.EVENT_MOVE:var n=Math.abs(1-t.scale),r=Math.abs(t.rotation);if(n<e.options.transform_min_scale&&r<e.options.transform_min_rotation)return;i.detection.current.name=this.name,this.triggered||(e.trigger(this.name+"start",t),this.triggered=!0),e.trigger(this.name,t),r>e.options.transform_min_rotation&&e.trigger("rotate",t),n>e.options.transform_min_scale&&(e.trigger("pinch",t),e.trigger("pinch"+(t.scale<1?"in":"out"),t));break;case i.EVENT_END:this.triggered&&e.trigger(this.name+"end",t),this.triggered=!1}}},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return i}):"object"==typeof module&&"object"==typeof module.exports?module.exports=i:t.Hammer=i}(this),/*
 * vivi.js v0.1.1
 * (c) 2014 ktty1220
 * License: MIT
 */
function(){var t,e,n,i,r,s,o,a,h=function(t,e){return function(){return t.apply(e,arguments)}},c={}.hasOwnProperty,u=function(t,e){function n(){this.constructor=t}for(var i in e)c.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};null==(r=Function.prototype).bind&&(r.bind=function(){var t,e,n,i,r,s;for(t=this,r=arguments[0],n=arguments.length,i=[],e=s=1;n>=1?n>s:s>n;e=n>=1?++s:--s)i.push(arguments[e]);return function(){return t.apply(r,i)}}),s=null,a=null,o={duration:function(){return function(t,e,n){var i;return null==n&&(n=""),i=""+e+"ms ease-out",n.length>0&&(n=""+n+","),t.style.WebkitTransition=""+n+"-webkit-transform "+i,t.style.transition=""+n+"transform "+i}}(this),set:function(){return function(t,e,n){var i;return null==n&&(n=0),i="translate3D("+e+"px, "+n+"px, 0)",t.style.WebkitTransform=i,t.style.transform=i}}(this),get:function(){return function(t){var e,n,i,r,s,o;return(e=(null!=(s=t.style.WebkitTransform)?s:"").match(/translate3d\s*\((.*?)\)/i))?(o=e[1].split(/\s*,\s*/).map(function(t){return Number(t.replace(/[^\d\.\-]/g,""))}),n=o[0],i=o[1],r=o[2],{x:n,y:i,z:r}):{x:0,y:0,z:0}}}(this)},e=function(){function t(t){this.top=t,this.setPos=h(this.setPos,this),this.setDuration=h(this.setDuration,this),this.moveBar=h(this.moveBar,this),this.setEl=h(this.setEl,this),this.hide=h(this.hide,this),this.refresh=h(this.refresh,this),this.el=document.createElement("div"),this.el.setAttribute("class","vv-scrollbar"),this.el.style.top=""+this.top+"px",document.querySelector("body").appendChild(this.el),this.visibleRemain=0,this.currentEl=null,this.show=!1,this.height=-1,this.timer=setInterval(function(t){return function(){return t.show&&--t.visibleRemain<=0?(t.el.style.opacity=0,t.show=!1):void 0}}(this),1e3),document.addEventListener("sectionactive",function(t){return function(e){var n;return n=e.target,t.setPos(n,o.get(n).y,0,!0)}}(this)),document.addEventListener("sectionbackground",function(t){return function(){var e;return e=document.querySelector("section.active .article-contents"),t.setPos(e,o.get(e).y,0,!0)}}(this))}return t.prototype.refresh=function(){return this.currentEl=null},t.prototype.hide=function(t){return null==t&&(t=!1),this.show=!1,this.setDuration(0),this.el.style.opacity=0,t?setTimeout(function(t){return function(){return t.moveBar()}}(this),600):void 0},t.prototype.setEl=function(t){var e;if(null!=t&&this.currentEl!==t){if(this.currentEl=t,this.height=t.parentNode.offsetHeight,e=t.offsetHeight,this.height>=e)return;return this.el.style.height=""+Math.max(6,this.height/e*this.height)+"px"}},t.prototype.moveBar=function(t,e){return null==t&&(t=0),null==e&&(e=0),this.setDuration(e),o.set(this.el,0,t)},t.prototype.setDuration=function(t){return o.duration(this.el,t,"opacity 600ms ease-out")},t.prototype.setPos=function(t,e,n,i){var r;return null==i&&(i=!1),null==this.currentEl&&this.setEl(t),r=t.offsetHeight,this.height>=r?void 0:(e*=-1,this.show||i||(this.show=!0,this.el.style.opacity=1),this.moveBar(e/r*this.height,n),i?void 0:this.visibleRemain=2)},t}(),i=function(){function t(){this.fireEvent=h(this.fireEvent,this),this.toggleClass=h(this.toggleClass,this),this.removeClass=h(this.removeClass,this),this.addClass=h(this.addClass,this),this.hasClass=h(this.hasClass,this),this.each=h(this.each,this),this.find=h(this.find,this),this._bodySize=h(this._bodySize,this),this._currentTransform=h(this._currentTransform,this),this._setTranslate3d=h(this._setTranslate3d,this),this._parentUntil=h(this._parentUntil,this)}return t.prototype.event={},t.prototype._evTransition=["oTransitionEnd","mozTransitionEnd","webkitTransitionEnd","transitionend"],t.prototype._parentUntil=function(t,e){var n,i,r;switch(!0){case/^[a-z][a-z0-9]*$/i.test(e):i="tagName",e="^"+e+"$";break;case/^\./.test(e):i="className",e="\\b"+e.substr(1)+"\\b";break;case/^#/.test(e):i="id",e="^"+e.substr(1)+"$";break;default:return null}for(n=new RegExp(e,"i");null!=t&&!n.test(null!=(r=t[i])?r:"");)t=t.parentNode;return t},t.prototype._setTranslate3d=function(t,e,n){return null==n&&(n=0),o.set(t,e,n)},t.prototype._currentTransform=function(t){return o.get(t)},t.prototype._bodySize=function(){return null==s&&(s=document.querySelector("body")),{height:s.offsetHeight,width:s.offsetWidth}},t.prototype.find=function(t,e){return null==e&&(e=this.el),/^\.[\w-]+$/.test(t)?e.getElementsByClassName(t.substr(1)):/^[a-z0-9]+$/i.test(t)?e.getElementsByTagName(t):e.querySelectorAll(t)},t.prototype.each=function(t,e,n){var i,r,s,o,a,h,c;if(e instanceof Function&&(n=e,e=null),r=this.find(t,e),0!==r.length){for(h=Array.prototype.slice.call(r),c=[],s=o=0,a=h.length;a>o;s=++o)i=h[s],c.push(n(i,s));return c}},t.prototype.hasClass=function(t,e){return new RegExp("(^| )"+e+"( |$)","gi").test(t.className)},t.prototype.addClass=function(t,e){return this.hasClass(t,e)?void 0:t.className=(""+t.className+" "+e).trim()},t.prototype.removeClass=function(t,e){var n;return n=new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi"),t.className=t.className.replace(n," ").trim()},t.prototype.toggleClass=function(t,e){return this.hasClass(t,e)?this.removeClass(t,e):this.addClass(t,e)},t.prototype.fireEvent=function(t,e){var n;return null==e&&(e=document),n=document.createEvent("HTMLEvents"),n.initEvent(t,!0,!1),e.dispatchEvent(n)},t}(),i.prototype._hammerOpt={swipe_velocity:.25,hold_timeout:500},["hold","tap","doubletap","drag","dragstart","dragend","dragup","dragdown","dragleft","dragright","swipe","swipeup","swipedown","swipeleft","swiperight","transform","transformstart","transformend","rotate","pinch","pinchin","pinchout","touch","release"].forEach(function(){return function(t){return i.prototype.event[t]=function(e,n){return 0!==e.length?("string"==typeof e&&(e=document.querySelectorAll(e)),e.length>0||(e=[e]),Array.prototype.forEach.call(e,function(e){return Hammer(e,i.prototype._hammerOpt).on(t,function(t){return n.call(t.target,t),t.preventDefault()})})):void 0}}}(this)),n=function(t){function e(t){this.el=t,this.changeTab=h(this.changeTab,this),this._createScroller=h(this._createScroller,this),this._onPageDrag=h(this._onPageDrag,this),this._onPageDragInit=h(this._onPageDragInit,this),this.onResize=h(this.onResize,this),this._createCheckBox=h(this._createCheckBox,this),this._delayTapSwipe=h(this._delayTapSwipe,this),this._delayTapHold=h(this._delayTapHold,this),this._delayTapDrag=h(this._delayTapDrag,this),this._delayTapEnd=h(this._delayTapEnd,this),this._delayTapStart=h(this._delayTapStart,this),this._tapEvent=h(this._tapEvent,this),this._navEvent=h(this._navEvent,this),this._onTabChanged=h(this._onTabChanged,this),this._doTabChange=h(this._doTabChange,this),this._currentTabIndex=h(this._currentTabIndex,this),this._hash2id=h(this._hash2id,this),this._setScroller=h(this._setScroller,this),this.actived=0,this._setTranslate3d(this.el,0),this._tabs=[],this._elTabLinks=this.find("nav li a"),this._elTabLinks.length>0&&this.addClass(this.find("nav li")[0],"active"),this.each("article",function(t){return function(e){return t._tabs.push(e.id)}}(this)),this._setScroller(),this._createCheckBox(),this._tapEvent(),this._navEvent()}return u(e,t),e.prototype._setScroller=function(){return this.each("article",function(){return function(t){var e,n,i,r;return e=t.innerHTML,r="vv-wrapper",n="",i=t.innerHTML.match(/^([\s\S]+)(<footer>[\s\S]+)$/i),i&&(r+=" vv-has-footer",e=i[1],n=i[2]),t.innerHTML='<div class="'+r+'">\n  <div class="article-contents">\n    '+e+"\n  </div>\n</div>\n"+n,t.style.visibility="visible"}}(this)),this._createScroller()},e.prototype._hash2id=function(t){return t.getAttribute("href").substr(1)},e.prototype._currentTabIndex=function(){return this._tabs.length<2?0:this._tabs.indexOf(this._hash2id(this.find("nav li.active a").item(0)))},e.prototype._doTabChange=function(t,e){var n,i,r,s,o;if(a.hide(),0!==this._elTabLinks.length){if(t=this._parentUntil(t,"a"),r=this.find(".vv-page").item(0),s=this._tabs.indexOf(this._hash2id(t)),0===this._currentTabIndex()&&0===s)return this._onTabChanged(r);if(n=this._bodySize().width,o=-1*n*s,i=this._currentTransform(r).x,o!==i)return e||this.addClass(t,"touch"),this._setTranslate3d(r,o),this.each("nav li",function(t){return function(e){return t.removeClass(e,"active")}}(this)),this.addClass(t.parentNode,"active")}},e.prototype._onTabChanged=function(){return this.each("nav li a",function(t){return function(e){return t.removeClass(e,"touch")}}(this))},e.prototype._navEvent=function(){var t,e,n,i,r;for(this.event.tap(this._elTabLinks,function(t){return function(e){return t._doTabChange(e.target)}}(this)),this.event.swipeleft(this.find("article"),function(t){return function(e){var n;if(!e.cancelBubble)return n=t._currentTabIndex(),n<t._elTabLinks.length-1?t._doTabChange(t._elTabLinks.item(n+1)):void 0}}(this)),this.event.swiperight(this.find("article"),function(t){return function(e){var n;if(!e.cancelBubble)return n=t._currentTabIndex(),n>0?t._doTabChange(t._elTabLinks.item(n-1)):void 0}}(this)),i=this._evTransition,r=[],e=0,n=i.length;n>e;e++)t=i[e],r.push(this.each(".vv-page",function(e){return function(n){return n.addEventListener(t,function(t){return e._onTabChanged(t.target)})}}(this)));return r},e.prototype._tapEvent=function(){var t,e,n,i,r,s,o,a;for(this._delayTapState={},s=this.find(".article-contents .list"),e=0,i=s.length;i>e;e++)t=s[e],t.addEventListener("touch",this._delayTapStart),t.addEventListener("dragstart",this._delayTapDrag),t.addEventListener("hold",this._delayTapHold),t.addEventListener("swipe",this._delayTapSwipe);for(o=this.find(".vv-wrapper"),a=[],n=0,r=o.length;r>n;n++)t=o[n],a.push(t.addEventListener("release",this._delayTapEnd));return a},e.prototype._delayTapStart=function(t){var e;return e=this._parentUntil(t.target,"li"),this._delayTapState={el:e,swipe:!1,hold:!1,timer:setTimeout(function(t){return function(){return null!=t._delayTapState.el?t.addClass(t._delayTapState.el,"touch"):void 0}}(this),80)}},e.prototype._delayTapEnd=function(t){var e,n,i,r;return r=this._delayTapState,e=r.el,i=r.swipe,n=r.hold,null!=e?setTimeout(function(r){return function(){var s,o;if(r.removeClass(e,"touch"),!i&&(o=/(right|left)/.test(t.gesture.direction)?30:5,t.gesture.distance<o)){if(s=r.find(".vv-checkbox",e),s.length>0)return r.toggleClass(s[0],"checked"),r.fireEvent("delaytap",e);if(!n||!r.hasClass(e,"vv-hold-event"))return r.fireEvent("delaytap",e)}}}(this),160):void 0},e.prototype._delayTapDrag=function(){return clearTimeout(this._delayTapState.timer)},e.prototype._delayTapHold=function(){return this._delayTapState.hold=!0},e.prototype._delayTapSwipe=function(){return this._delayTapState.swipe=!0},e.prototype._createCheckBox=function(){var t;return t='<div class="vv-checkbox"></div>',this.each(".vv-page .list-item-checkbox",function(){return function(e){var n;return n=e.children,0===n.length?e.append(t):e.children[0].insertAdjacentHTML("beforebegin",t)}}(this))},e.prototype.onResize=function(){return this._elTabLinks.length>0&&this._doTabChange(this._elTabLinks.item(this._currentTabIndex()),!0),this.hasClass(this.el,"active")||"vv-main"===this.el.id?void 0:(this.addClass(this.el,"bgset"),this._setTranslate3d(this.el,this._bodySize().width),this.removeClass(this.el,"bgset"))},e.prototype._onPageDragInit=function(t){var e,n;return this.hasClass(t.target,"vv-wrapper")?(e=this.find(".article-contents",t.target)[0],n=t.target):(e=this._parentUntil(t.target,".article-contents"),n=this.find(".vv-wrapper")[0]),a.setEl(e),this._dragState={scrollRange:n.offsetHeight,el:e,elWrapper:n,pos:this._currentTransform(e).y,deltaHistory:[]}},e.prototype._onPageDrag=function(t){var e,n,i,r,s,h,c,u,l,d,p,f,g,v,_,E,m,T,y;if(m=this._dragState,p=m.pos,u=m.el,l=m.elWrapper,f=m.scrollRange,i=m.deltaHistory,T=t.gesture,s=T.deltaY,g=T.velocityY,r=T.deltaTime,h=T.direction,"left"!==h&&"right"!==h){if(v=p+s,"dragend"===t.type){for(f*=g,y=[.2,.4,.6,.8],_=0,E=y.length;E>_;_++)n=y[_],n>g&&(f*=n/2+.5);f*=2*Math.abs(s)/l.offsetHeight,i.pop(),e=Math.abs(s)-Math.abs(i.pop()),1>=e&&(f=0),e>10&&(f*=2),"up"===h&&(f*=1.3),c=400}else this._dragState.deltaHistory.push(s),100>r&&g>.05?(f=s,"down"===h&&(f*=-1),c=100):(f=0,c=0);switch(o.duration(u,c),d=-1*(u.offsetHeight-l.offsetHeight),h){case"up":v=Math.max(v-f,d);break;case"down":v+=f}return v>0&&(v=0),a.setPos(u,v,c),this._setTranslate3d(u,0,v)}},e.prototype._createScroller=function(){var t,e,n,i,r;for(i=this.find("article .vv-wrapper"),r=[],e=0,n=i.length;n>e;e++)t=i[e],t.addEventListener("dragstart",this._onPageDragInit,!0),t.addEventListener("dragend",this._onPageDrag,!0),t.addEventListener("dragup",this._onPageDrag,!0),r.push(t.addEventListener("dragdown",this._onPageDrag,!0));return r},e.prototype.changeTab=function(t){return this._elTabLinks.length>0?this._doTabChange(this._elTabLinks.item(this._tabs.indexOf(t))):void 0},e}(i),t=function(t){function i(){this.changeSection=h(this.changeSection,this),this.changeTab=h(this.changeTab,this),this._tapEvent=h(this._tapEvent,this),this._sectionEvent=h(this._sectionEvent,this),this.closeSection=h(this.closeSection,this),this.refreshScrollbar=h(this.refreshScrollbar,this),this.hideScrollbar=h(this.hideScrollbar,this),this._doSectionChange=h(this._doSectionChange,this),this._onSectionChanged=h(this._onSectionChanged,this),this._navEvent=h(this._navEvent,this),this._onResize=h(this._onResize,this),this.ready=h(this.ready,this);var t,e,n,i;this.el=document,this.section={},this.cordova={onPause:function(){return function(){}}(this),onResume:function(){return function(){}}(this),onOnline:function(){return function(){}}(this),onOffline:function(){return function(){}}(this),onBackButton:function(t){return function(){return t.closeSection()}}(this),onMenuButton:function(){return function(){}}(this),onOptionSelect:function(){return function(){}}(this),onSearchButton:function(){return function(){}}(this),onStartcallButton:function(){return function(){}}(this),onEndcallButton:function(){return function(){}}(this),onVolumeDownButton:function(){return function(){}}(this),onVolumeUpButton:function(){return function(){}}(this),onBatteryCritical:function(){return function(){}}(this),onBatteryLow:function(){return function(){}}(this),onBatteryStatus:function(){return function(){}}(this)},i=this.cordova,n=function(t){return function(e){var n;return n=/battery/i.test(e)?window:document,n.addEventListener(e.substr(2).toLowerCase(),function(n){return t.cordova[e](n)},!1)}}(this);for(e in i)t=i[e],/^on/.test(e)&&n(e);this.initialize=function(){return function(t){return t()}}(this),this.finalize=function(){return function(t){return t()}}(this)}return u(i,t),i.prototype.ready=function(t,i){var r;return t instanceof Function&&(i=t,t=10),r=/(android|ios)/i.test(navigator.userAgent)?"deviceready":"DOMContentLoaded",document.addEventListener(r,function(r){return function(){return r.initialize(function(){return r.each("body>section",function(t){return r.section[t.id]=new n(t)}),r.addClass(r.section["vv-main"].el,"active"),r.section["vv-main"].actived=1,a=new e(r.section["vv-main"].find(".vv-wrapper")[0].offsetTop),window.addEventListener("resize",r._onResize),r._onResize(),r._tapEvent(),r._navEvent(),r._sectionEvent(),setTimeout(function(){return i.apply(window)},t)})}}(this))},i.prototype._onResize=function(){var t,e,n,i,r,s;e=this._bodySize(),t=""+e.height+"px",a.refresh(),this.each("article",function(){return function(e){return e.style.minHeight=t}}(this)),r=this.section,s=[];for(n in r)i=r[n],s.push(i.onResize());return s},i.prototype._navEvent=function(){var t,e,n,i,r;for(i=this._evTransition,r=[],e=0,n=i.length;n>e;e++)t=i[e],r.push(this.each("body>section",function(e){return function(n){return n.addEventListener(t,function(t){var n;if(/transform/.test(t.propertyName))return n=t.target,e.hasClass(n,"standby")?e._onSectionChanged(n):void 0})}}(this)));return r},i.prototype._onSectionChanged=function(t){var e,n,i;if(this.removeClass(t,"standby"),this.hasClass(t,"back"))return this.removeClass(t,"back"),this.fireEvent("sectionbackground",t);i=this.section;for(e in i)n=i[e],this.removeClass(n.el,"active");return this.addClass(t,"active"),this.section[t.id].actived=parseInt(new Date/1e3,10),this.fireEvent("sectionactive",t)},i.prototype._doSectionChange=function(t){return this.hasClass(t,"active")?void 0:(a.hide(),0===o.get(t).x&&(this.addClass(t,"bgset"),this._setTranslate3d(t,this._bodySize().width),this.removeClass(t,"bgset")),this.addClass(t,"standby"),function(t){return function(e){return setTimeout(function(){return t._setTranslate3d(e,0)},10)}}(this)(t))},i.prototype.hideScrollbar=function(t){return null==t&&(t=!1),a.hide(t)},i.prototype.refreshScrollbar=function(){return a.refresh()},i.prototype.closeSection=function(){var t,e;return a.hide(),t=this.find("body>section.active").item(0),"vv-main"===t.id?(e=this.section["vv-main"],0===e._currentTabIndex()?void this.finalize(function(){return function(){var t;return null!=(t=window.navigator.app)&&"function"==typeof t.exitApp?t.exitApp():void 0}}(this)):e.changeTab(e._tabs[0])):(this.section[t.id].actived=0,this.removeClass(t,"active"),this.addClass(t,"standby back"),function(t){return function(e){return setTimeout(function(){var n,i,r,s;i=null,s=t.section;for(n in s)r=s[n],r.actived>0&&(null==i||i.actived<r.actived)&&(i=r);return t.addClass(i.el,"active"),t._setTranslate3d(e,t._bodySize().width)},10)}}(this)(t))},i.prototype._sectionEvent=function(){return this.event.tap(this.find("header .vv-back"),function(t){return function(){return t.closeSection()}}(this))},i.prototype._tapEvent=function(){var t;return t=function(){return function(t){return t.preventDefault()}}(this),this.el.addEventListener("touchmove",t,!1),this.el.addEventListener("click",t,!1),this.event.touch(this.find("a"),function(t){return function(e){return t.addClass(t._parentUntil(e.target,"a"),"touch")}}(this)),this.event.release(this.find("a"),function(t){return function(e){return t.removeClass(t._parentUntil(e.target,"a"),"touch")}}(this))},i.prototype.changeTab=function(t){return this.section[this.find("body>section.active").item(0).id].changeTab(t)},i.prototype.changeSection=function(t){return this._doSectionChange(this.find("#"+t).item(0))},i}(i),window.VV=new t}.call(this);